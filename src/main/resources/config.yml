# WalkieTalkiePlugin configuration
# Minecraft: 1.21.8

# Developer mode (enables extra debug logging)
dev: true

# Nadawanie radiem: trzymaj radio w main hand + użyj PTT w Simple Voice Chat.

# Simple Voice Chat (SVC) integration
# Uwaga: to nie jest konfiguracja portu Voice Chat (to jest w configu SVC).
# Tutaj sterujesz tylko integracją pluginu z API SVC.
svc:
  enabled: true
  logHook: true
  # DEV-only: allow hearing yourself on radio for debugging routing.
  # Works only if `dev: true` AND this flag is true.
  hearSelfInDev: false
  # Voice Chat host shown by /walkietalkie info (informational only)
  # Example: "127.0.0.1" or "my.domain.com"
  host: "192.168.18.17"
  # Voice Chat UDP port (informational only; real port is configured in voicechat-server.properties)
  port: 24454
  # If true, radio/proximity override will only apply within the same world.
  sameWorldOnly: true
  # MicrophonePacketEvent priority used when registering to SVC (higher runs later).
  microphoneEventPriority: 100
  # Radio will be delivered ONLY if receiver is at least this far from the sender.
  # If receiver is closer (and is allowed to hear), we don't send radio to avoid overlap;
  # SVC proximity voice can handle it.
  # Set to 0 to always deliver radio.
  radioMinDistanceBlocks: 100.0
  # Make radio audio slightly positional to give a subtle attenuation/"fade" effect.
  # Implementation: sends radio as a LocationalSoundPacket positioned a few blocks towards the sender.
  radioSpatial:
    enabled: true
    # How far from the receiver the perceived source is placed (towards the sender)
    offsetBlocks: 5.0
    # Max hearing distance for the locational packet (must be > offsetBlocks)
    distanceBlocks: 8.0


# ItemsAdder IDs (uzupełnimy później). Przykład formatu: "namespace:item_name"
# Uwaga: radio-itemy będą bazować na "disc fragment".
radios:
  czerwoni: "radio:radio_czerwoni"
  niebiescy: "radio:radio_niebiescy"
  handlarze: "radio:radio_handlarze"
  piraci: "radio:radio_piraci"
  tohandlarze: "radio:radio_tohandlarze"
  piraci_random: "radio:radio_piraci_random"

# Feedback sounds
sounds:
  # Dedicated sounds for starting/stopping radio transmit.
  # Note: generic sounds.start/stop are used for LISTEN and pirate eavesdrop UX (not for transmit).
  transmitStart:
    enabled: true
    sound: "radio:start_transmit"
    volume: 0.4
    pitch: 1.0
  transmitStop:
    enabled: true
    sound: "radio:stop_transmit"
    volume: 0.4
    pitch: 1.0
  start:
    enabled: true
    sound: "block.sand.place"
    volume: 0.6
    pitch: 0.5
  stop:
    enabled: true
    sound: "block.sand.place"
    volume: 0.6
    pitch: 0.1
  # Played once when switching to a radio / between radios in hotbar
  switch:
    enabled: false
    sound: "block.sand.place"
    volume: 0.4
    pitch: 0.8

  # Played once when putting away a radio (switching away from a radio)
  holster:
    enabled: false
    sound: "block.sand.place"
    volume: 0.6
    pitch: 0.1

  # Subtle loop/pulse for a "radio filter" feeling while transmitting (PTT active)
  # This plays locally to the sender only.
  filterLoop:
    enabled: false
    # Mode:
    # - ALWAYS: play while holding a transmit-capable radio
    # - PTT: play only shortly after mic packets (while actively speaking)
    mode: "PTT"
    # How long after last mic packet we still consider the player "actively transmitting"
    activeForMs: 10
    # How often to play the pulse (ticks)
    everyTicks: 10

    # One pulse can play multiple sounds (played in order)
    sounds:
      - sound: "ambient.weather.rain"
        volume: 0.04
        pitch: 1.8
      - sound: "block.sand.idle"
        volume: 1.0
        pitch: 2.8

    # Legacy single-sound format (used if `sounds:` list is missing)
    sound: "ambient.weather.rain"
    volume: 0.04
    pitch: 1.8

  # Alternative to filterLoop: play one long custom resource-pack sound while transmitting.
  # IMPORTANT:
  # - Resource packs do NOT support mp3; use .ogg.
  # - "sound" here is a sound EVENT key from your resource pack (or ItemsAdder), e.g. "radio:filter_long".
  # - Stopping is best-effort: with SVC PTT there is no explicit "PTT up" event.
  filterLong:
    enabled: true
    sound: "radio:filter_long"
    volume: 0.04
    pitch: 1.0

  # Played when channel is busy (someone else is transmitting)
  busy:
    enabled: true
    sound: "block.note_block.bass"
    volume: 0.3
    pitch: 0.9

# Visual staging (ItemsAdder textures order: _0 OFF, _1 TRANSMIT, _2 LISTEN)
visuals:
  transmit:
    enabled: true
  listen:
    enabled: true
    # How long we keep LISTEN stage after last received radio packet
    activeForMs: 300

# Prevent overlapping voices: only 1 transmitter per channel at a time
radio:
  # Scope for radio routing + busy-line locking:
  # - WORLD (default): transmit/receive per-world like SVC normally behaves
  # - GLOBAL: allow cross-world radio (if SVC delivers events) and avoid retaining world tokens in locks
  scope: "WORLD"
  busyLine:
    enabled: true
    # If no packets arrive for this long, the line is considered free again
    timeoutMs: 350
    # Rate-limit the "busy" hint to the sender
    hintCooldownMs: 750

commands:
  messages:
    prefix: "&8[&bWT&8]&r "
    # /walkietalkie usage text
    usage: "&7Użycie: /{label} <reload|info>"
    noPermission: "&cBrak permisji."
    reloaded: "&aPrzeładowano konfigurację."
    info:
      - "&bWalkieTalkiePlugin &7v{version}"
      - "&7SVC: &f{svcEnabled} &7worldOnly: &f{sameWorldOnly}"
      - "&7radioMinDistance: &f{radioMinDistance}"
      - "&7voiceHost: &f{svcHost}"
      - "&7voicePort: &f{svcPort}"
      # Extra placeholders you can use in any line:
      # - {svcHooked}
      # - {radioScope}
      # - {svcAddress} (computed from host+port; legacy svc.address also works)

# ActionBar notifications (all optional)
notifications:
  permissions:
    # Cooldown for permission warnings to avoid spam
    cooldownMs: 1500
    # Shown when player tries to transmit but lacks permission
    noTransmit:
      enabled: true
      actionBar: "&cBrak permisji: nie możesz nadawać na &f{channel}"
    # Shown when player has radios but can't listen to any selected channel (or pirate eavesdrop)
    noListen:
      enabled: true
      actionBar: "&cBrak permisji: nie możesz słuchać kanału &f{channel}"
    # Shown when player lacks both use + listen permissions
    noAccess:
      enabled: true
      actionBar: "&cBrak permisji: nie możesz mówić ani słuchać &f{channel}"
  transmit:
    start:
      enabled: true
      actionBar: "&aNadawanie"
    stop:
      enabled: true
      actionBar: "&cKoniec nadawania"
    busy:
      enabled: true
      actionBar: "&eLinia zajęta - poczekaj"
  eavesdrop:
    start:
      enabled: true
      actionBar: "&5Podsłuch"
    stop:
      enabled: true
      actionBar: "&5Koniec podsłuchu"

# Hint: pokazuje nadającemu, że musi wcisnąć PTT w Simple Voice Chat
hints:
  pttRequired:
    enabled: true
    # Jeśli od ostatniego pakietu audio minęło tyle ms, pokaż hint
    afterMs: 2000
    # Jak często sprawdzać (ticki)
    checkEveryTicks: 20
    # Minimalny odstęp między ponownym pokazaniem (ticki)
    cooldownTicks: 100
    actionBar: "&eUżyj Voice Chat`u aby nadawać"

# Debugger / diagnostyka
debug:
  enabled: true
  logIntervalMs: 3000
